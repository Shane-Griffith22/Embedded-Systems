/**
 ******************************************************************************
 * @file           : main.c
 * @author         : Auto-generated by STM32CubeIDE
 * @brief          : Main program body
 ******************************************************************************
 * @attention
 *
 * Copyright (c) 2023 STMicroelectronics.
 * All rights reserved.
 *
 * This software is licensed under terms that can be found in the LICENSE file
 * in the root directory of this software component.
 * If no LICENSE file comes with this software, it is provided AS-IS.
 *
 ******************************************************************************
 */

#include <stdint.h>
#include <stdio.h>
#include "Driver.h"

void delay(){
for(uint32_t i = 0; i < 300000; i++);
}


int main(void)
{
//Enables clock for GPIOD
GPIOD_PCLK_EN;
//Configure PA0-PD3 for Output
GPIOD_PIN0_OUT;
GPIOD_PIN1_OUT;
GPIOD_PIN2_OUT;
GPIOD_PIN3_OUT;
//Configure P8-P11 for input
GPIOD_PIN0_IN;
GPIOD_PIN1_IN;
GPIOD_PIN2_IN;
GPIOD_PIN3_IN;
//Configure pull up resistors for D pins 8-11
GPIOD_PIN8_PU;
GPIOD_PIN9_PU;
GPIOD_PIN10_PU;
GPIOD_PIN11_PU;


while(1){
	GPIOD->ODR |= (0xf);

	GPIOD->ODR &= ~(0x1 << 0);

	GPIOD->IDR |= (0 << 8);

	if(!(GPIOD->IDR & (1 << 8))){
		delay();
		printf("1\n");
	}if(!(GPIOD->IDR & (0x1 << 9))){
		delay();
		printf("2\n");
	}if(!(GPIOD->IDR & (0x1 << 10))){
		for(uint8_t i =  0; i < 150000; i++);
		printf("3\n");
	}if (!(GPIOD->IDR & (0x1 << 11))){
		for(uint8_t i =  0; i < 150000; i++);
		printf("A\n");
	}

	GPIOD->ODR |= (0xf);
	GPIOD->ODR &= ~(0x1 << 1);

	if(!(GPIOD->IDR & (1 << 8))){
			delay();
			printf("4\n");
		} if(!(GPIOD->IDR & (0x1 << 9))){
			delay();
			printf("5\n");
		} if(!(GPIOD->IDR & (0x1 << 10))){
			for(uint8_t i =  0; i < 150000; i++);
			printf("6\n");
		} if (!(GPIOD->IDR & (0x1 << 11))){
			for(uint8_t i =  0; i < 150000; i++);
			printf("B\n");
		}

	GPIOD->ODR |= (0xf);
	GPIOD->ODR &= ~(0x1 << 2);


	if(!(GPIOD->IDR & (1 << 8))){
			delay();
			printf("7\n");
		} if(!(GPIOD->IDR & (0x1 << 9))){
			delay();
			printf("8\n");
		} if(!(GPIOD->IDR & (0x1 << 10))){
			for(uint8_t i =  0; i < 150000; i++);
			printf("9\n");
		} if (!(GPIOD->IDR & (0x1 << 11))){
			for(uint8_t i =  0; i < 150000; i++);
			printf("C\n");
		}

	GPIOD->ODR |= (0xf);
	GPIOD->ODR &= ~(0x1 << 2);

	if(!(GPIOD->IDR & (1 << 8))){
				delay();
				printf("*\n");
			} if(!(GPIOD->IDR & (0x1 << 9))){
				delay();
				printf("0\n");
			} if(!(GPIOD->IDR & (0x1 << 10))){
				for(uint8_t i =  0; i < 150000; i++);
				printf("#\n");
			} if (!(GPIOD->IDR & (0x1 << 11))){
				for(uint8_t i =  0; i < 150000; i++);
				printf("D\n");
			}


}




}
